{#let showAccountName = false showTotalSales = false showTitle = false}

{#for cs in customerSalesList}
    {#if cs.accountName != null}
        {#set showAccountName = true}
    {/if}
    {#if cs.totalSalesFormatted != null}
        {#set showTotalSales = true}
    {/if}
    {#if cs.title != null && showTitle == false}
        {#set showTitle = true}
        <div>{showTitle} {cs.title}</div>
    {/if}
{/for}

<table>
    <thead>
      <tr>
        {#if showAccountName}
          <th>Account Name</th>
        {/if}
        {#if showTotalSales}
          <th>Total Sales</th>
        {/if}
        {showTitle}
        {#if showTitle}
          <th>Title</th>
        {/if}
      </tr>
    </thead>
    <tbody>
      {#for cs in customerSalesList}
        <tr>
          {#if showAccountName}
            <td>{cs.accountName}</td>
          {/if}
          {#if showTotalSales}
            <td>{cs.totalSalesFormatted}</td>
          {/if}
          {showTitle}
          {#if showTitle}
            <td>{cs.title}</td>
          {/if}
        </tr>
      {/for}
    </tbody>
  </table>
